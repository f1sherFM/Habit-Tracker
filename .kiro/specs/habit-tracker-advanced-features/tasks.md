# План Реализации: Продвинутые Функции Habit-Tracker

## Фаза 1: Подготовка и Миграция БД

- [ ] 1.1 Создать миграцию для добавления таблиц категорий, тегов и комментариев
- [ ] 1.2 Добавить новые поля к таблицам habits и users
- [ ] 1.3 Создать индексы для оптимизации производительности
- [ ] 1.4 Протестировать миграцию на тестовой БД

## Фаза 2: Модели Данных

- [ ] 2.1 Создать модель Category
- [ ] 2.2 Создать модель Tag
- [ ] 2.3 Создать модель Comment
- [ ] 2.4 Обновить модель Habit с новыми полями
- [ ] 2.5 Обновить модель User с новыми полями
- [ ] 2.6 Добавить relationships между моделями

## Фаза 3: Система Валидации

- [ ] 3.1 Создать TrackingDaysValidator
- [ ] 3.2 Создать CommentValidator
- [ ] 3.3 Создать TagValidator
- [ ] 3.4 Создать CategoryValidator
- [ ] 3.5 Написать unit тесты для валидаторов
- [ ] 3.6 Написать property-based тесты для валидаторов

## Фаза 4: Слой Сервисов

- [ ] 4.1 Создать CategoryService
- [ ] 4.2 Создать TagService
- [ ] 4.3 Создать CommentService
- [ ] 4.4 Создать AnalyticsService
- [ ] 4.5 Написать unit тесты для сервисов
- [ ] 4.6 Написать integration тесты для сервисов

## Фаза 5: API Эндпоинты - Категории

- [ ] 5.1 Создать GET /api/categories
- [ ] 5.2 Создать POST /api/categories
- [ ] 5.3 Создать PUT /api/categories/{id}
- [ ] 5.4 Создать DELETE /api/categories/{id}
- [ ] 5.5 Написать тесты для категорий API

## Фаза 6: API Эндпоинты - Теги

- [ ] 6.1 Создать GET /api/habits/{id}/tags
- [ ] 6.2 Создать POST /api/habits/{id}/tags
- [ ] 6.3 Создать DELETE /api/habits/{id}/tags/{tag_id}
- [ ] 6.4 Создать GET /api/tags/suggestions
- [ ] 6.5 Написать тесты для тегов API

## Фаза 7: API Эндпоинты - Комментарии

- [ ] 7.1 Создать GET /api/habits/{id}/comments
- [ ] 7.2 Создать POST /api/habit-logs/{id}/comments
- [ ] 7.3 Создать PUT /api/comments/{id}
- [ ] 7.4 Создать DELETE /api/comments/{id}
- [ ] 7.5 Написать тесты для комментариев API

## Фаза 8: API Эндпоинты - Аналитика

- [ ] 8.1 Создать GET /api/analytics/habits/{id}
- [ ] 8.2 Создать GET /api/analytics/categories/{id}
- [ ] 8.3 Создать GET /api/analytics/overview
- [ ] 8.4 Создать GET /api/analytics/heatmap
- [ ] 8.5 Написать тесты для аналитики API

## Фаза 9: Фильтрация и Поиск

- [ ] 9.1 Добавить фильтрацию по категориям в GET /api/habits
- [ ] 9.2 Добавить фильтрацию по тегам в GET /api/habits
- [ ] 9.3 Добавить комбинированную фильтрацию
- [ ] 9.4 Добавить поиск по комментариям
- [ ] 9.5 Написать тесты для фильтрации

## Фаза 10: Гибкий Период Отслеживания

- [ ] 10.1 Добавить поддержку tracking_days в GET /api/habits
- [ ] 10.2 Добавить поддержку tracking_days в GET /api/analytics
- [ ] 10.3 Сохранять default_tracking_days в профиле пользователя
- [ ] 10.4 Обновить статистику для использования tracking_days
- [ ] 10.5 Написать тесты для периода отслеживания

## Фаза 11: Frontend - Категории и Теги

- [ ] 11.1 Создать UI для управления категориями
- [ ] 11.2 Создать UI для добавления тегов
- [ ] 11.3 Создать UI для фильтрации по категориям
- [ ] 11.4 Создать UI для фильтрации по тегам
- [ ] 11.5 Добавить автодополнение для тегов

## Фаза 12: Frontend - Комментарии

- [ ] 12.1 Создать UI для добавления комментариев
- [ ] 12.2 Создать UI для просмотра комментариев
- [ ] 12.3 Создать UI для редактирования комментариев
- [ ] 12.4 Создать UI для удаления комментариев
- [ ] 12.5 Добавить отображение истории комментариев

## Фаза 13: Frontend - Аналитика

- [ ] 13.1 Создать страницу аналитики
- [ ] 13.2 Добавить график выполнения привычек
- [ ] 13.3 Добавить сравнение по категориям
- [ ] 13.4 Добавить тепловую карту
- [ ] 13.5 Добавить топ-5 привычек

## Фаза 14: Frontend - Период Отслеживания

- [ ] 14.1 Добавить селектор периода на дашборд
- [ ] 14.2 Добавить предустановки (7, 14, 30 дней)
- [ ] 14.3 Добавить кастомный период
- [ ] 14.4 Сохранять выбор периода в localStorage
- [ ] 14.5 Обновлять все графики при изменении периода

## Фаза 15: Интеграция и Оптимизация

- [ ] 15.1 Оптимизировать запросы к БД
- [ ] 15.2 Добавить кэширование статистики
- [ ] 15.3 Оптимизировать производительность аналитики
- [ ] 15.4 Добавить пагинацию для комментариев
- [ ] 15.5 Провести нагрузочное тестирование

## Фаза 16: Документация и Финализация

- [ ] 16.1 Обновить API документацию
- [ ] 16.2 Написать руководство пользователя
- [ ] 16.3 Создать примеры использования
- [ ] 16.4 Провести финальное тестирование
- [ ] 16.5 Подготовить релиз v3.0.0
